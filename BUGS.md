# BUGS.md — Найденные дефекты микросервиса объявлений

Тестировался: https://qa-internship.avito.com  
Версия API: `/api/1/*` (основная)  
Дата тестирования: ноябрь 2025

| # | Название бага | Severity | Priority | Описание | Шаги воспроизведения | Фактический результат | Ожидаемый результат | Комментарий |
|---|---------------|----------|----------|----------|-----------------------|------------------------|-----------------------|-------------|
| 1 | **Возможность создать объявление с отрицательной ценой** | **Blocker** | Highest | Сервис позволяет создать объявление с `price: -100` (и любым отрицательным значением), если в объекте `statistics` все поля > 0. Это нарушает бизнес-логику и может привести к мошенничеству/некорректным объявлениям. | 1. `POST /api/1/item`<br>2. Тело:<br>```json { "sellerID": 222222, "name": "Товар", "price": -100, "statistics": { "likes": 1, "viewCount": 1, "contacts": 1 } }``` | 200 OK<br>```{"status": "Сохранили объявление - 70d971bf-ce50-4448-8de3-d604ca078cf0"}```<br>Объявление создаётся с ценой -100 | 400 Bad Request с сообщением типа "цена не может быть отрицательной" | Должна быть валидация `price >= 0` |
| 2 | **Ошибка маскировки: отрицательная цена скрывается другой валидацией** | Critical | High | Если в `statistics` все поля = 0, то при `price: -100` сервис падает на ошибке "поле likes обязательно", хотя настоящая проблема — отрицательная цена. | 1. `POST /api/1/item`<br>2. Тело:<br>```json { "sellerID": 222222, "name": "Товар", "price": -100, "statistics": { "likes": 0, "viewCount": 0, "contacts": 0 } }``` | 400 Bad Request<br>```{"result": {"message": "поле likes обязательно", ...}}``` | 400 Bad Request с сообщением про отрицательную цену (или хотя бы несколько ошибок сразу) | Неправильный порядок валидации: статистика проверяется раньше цены |
| 3 | **Некорректное сообщение при отсутствии statistics** | Major | High | При отправке тела без объекта `statistics` сервис ругается на отсутствие поля `likes`, а не на отсутствие всего объекта. | 1. `POST /api/1/item`<br>2. Тело:<br>```json { "sellerID": 111111, "name": "Товар", "price": 5000 }``` | 400<br>```{"result": {"message": "поле likes обязательно", ...}}``` | 400 с сообщением "поле statistics обязательно" или "отсутствует объект statistics" | Сообщение вводит в заблуждение. Пользователь не понимает, что нужно передать весь объект |
| 4 | **Неинформативная ошибка при неверном типе sellerID** | Major | Medium | При передаче `sellerID` как строки (`"abc"`) сервис возвращает абсолютно нерелевантное сообщение. | 1. `POST /api/1/item`<br>2. Тело:<br>```json { "sellerID": "abc", "name": "Товар", "price": 500, "statistics": { "likes": 1, "viewCount": 2, "contacts": 3 } }``` | 400<br>```{"status": "не передано тело объявления"}``` | 400 с сообщением "sellerID должен быть числом" или "некорректный тип поля sellerID" | Сообщение полностью ложно — тело передано, но не распарсилось |

